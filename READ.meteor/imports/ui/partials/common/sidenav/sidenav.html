<form name="sideNavForm" novalidate>
  <div ng-if="$ctrl.itemsControl.creatable()" class="form-group"
  ng-class="{'has-error': sideNavForm.newItemName.$dirty && sideNavForm.newItemName.$invalid }">
  <label for="newItemName">Create {{$ctrl.itemsControl.itemType}}</label>
  <div class="input-group">
    <input type="text" class="form-control" placeholder="newest"
    ng-model="$ctrl.itemsControl.newItemName" name="newItemName" minlength=1 maxlength=20></input>
    <span class="input-group-addon btn btn-default"
    ng-class="{'disabled': (sideNavForm.newItemName.$isEmpty(sideNavForm.newItemName.$modelValue) || sideNavForm.newItemName.$invalid)}"
    ng-click="(sideNavForm.newItemName.$invalid || $ctrl.itemsControl.createItem())"><i class="fa fa-arrow-circle-right"></i></span>
  </div>
  <div ng-messages="sideNavForm.newItemName.$error" class="help-block">
    <div ng-message="minlength">Name must have at least 1 character</div>
  </div>
</div>

<div ng-if="! $ctrl.itemsControl.creatable()">
  {{$ctrl.itemsControl.whyNotCreatable}}
</div>


<div class="form-group" ng-click="$ctrl.itemsControl.cloneItem()" ng-if="$ctrl.itemsControl.selectedItem && $ctrl.itemsControl.clonable">
  <button class="btn btn-default">Clone {{$ctrl.itemsControl.itemType}}</button>
</div>

<div class="form-group" ng-if="$ctrl.items.length > 0">
  <label for="selectedItemId">Select {{$ctrl.itemsControl.itemType}}</label>
  <div class="radio" ng-repeat="item in $ctrl.items">
    <label>
      <input type="radio" ng-model="$ctrl.itemsControl.selectedId" value="{{item._id}}"
      ng-change="$ctrl.itemsControl.switchItem($ctrl.itemsControl.selectedId)"/>
      {{item.name}}
    </label>
  </div>
</div>

<div ng-if="$ctrl.item">
  <div ng-if="$ctrl.itemControls.readOnlyable">
    <label>Readonly settings for {{$ctrl.itemControls.itemType}}</label>
    <div class="form-group">
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="$ctrl.item.readOnly" ng-disabled="! $ctrl.itemControls.validItem()"
          ng-change="$ctrl.itemControls.updateItem()"> Read only
        </label>
      </div>
    </div>
  </div>

  <div class="form-group" ng-if="$ctrl.item && ! $ctrl.item.readOnly"
  ng-class="{'has-error': sideNavForm.renamedItemName.$dirty && sideNavForm.renamedItemName.$invalid }">
  <label for="renamedItemName">Rename {{$ctrl.itemControls.itemType}}</label>
  <div class="input-group">
    <input type="text" class="form-control" placeholder="newest" ng-model="$ctrl.itemControls.newItemName" name="renamedItemName" minlength=1 maxlength=20>
    <span class="input-group-addon btn btn-default" ng-class="{'disabled': sideNavForm.renamedItemName.$isEmpty(sideNavForm.renamedItemName.$modelValue) || sideNavForm.renamedItemName.$invalid || (sideNavForm.renamedItemName.$modelValue === $ctrl.item.name)}"
    ng-click="(sideNavForm.newItemName.$invalid || $ctrl.itemControls.renameItem())"><i class="fa fa-arrow-circle-right"></i></span>
  </div>
  <div ng-messages="sideNavForm.newItemName.$error" class="help-block">
    <div ng-message="minlength">{{$ctrl.itemControls.itemType}} name must have at least 1 character</div>
  </div>
</div>

<div class="form-group" ng-if="(! $ctrl.item.readOnly) && ($ctrl.itemControls.deletable())">
  <div>
    <button class="btn btn-warning" ng-click="$ctrl.brieflyShowAreYouSure()">Delete {{$ctrl.itemControls.itemType}}</button>
    <button ng-if="$ctrl.showAreYouSure" class="btn btn-danger" ng-click="$ctrl.deleteItem()">Confirm</button>
  </div>
</div>
</div>


</form>
