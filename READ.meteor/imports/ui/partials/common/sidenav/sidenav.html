<ol class="breadcrumb">
  <li ng-show="$ctrl.itemsControl.creatable()" ng-click="$ctrl.itemsControl.createItem()">
    <a href="javascript:void(0)" uib-tooltip="{{'Create ' + $ctrl.itemsControl.itemType}}"
    tooltip-is-open="$ctrl.createTooltipIsOpen" tooltip-placement="bottom-left">
    <i class="fa fa-plus-circle" aria-hidden="true"></i></a>
  </li>
  <li ng-show="$ctrl.itemsControl.selectedItem && $ctrl.itemsControl.clonable" ng-click="$ctrl.itemsControl.cloneItem()">
    <a href="javascript:void(0)" uib-tooltip="{{'Clone ' + $ctrl.itemsControl.itemType}}" tooltip-placement="bottom-left"><i class="fa fa-clone" aria-hidden="true"></i></a>
  </li>
  <li ng-show="$ctrl.itemsControl.selectedItem" ng-click="$ctrl.settingsToggle = ! $ctrl.settingsToggle">
    <a href="javascript:void(0)" uib-tooltip="{{$ctrl.itemsControl.itemType + ' Settings'}}" tooltip-placement="bottom-left"><i class="fa fa-edit" aria-hidden="true"></i></a>
  </li>
  <li ng-show="$ctrl.itemsControl.selectedItem && (! $ctrl.item.readOnly) && ($ctrl.itemControls.deletable())" ng-click="$ctrl.brieflyShowAreYouSure()">
    <a href="javascript:void(0)" uib-tooltip="{{'Delete ' + $ctrl.itemsControl.itemType}}"
    tooltip-placement="bottom-left"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>
    <button ng-if="$ctrl.showAreYouSure" class="btn btn-danger btn-xs" ng-click="$ctrl.deleteItem()">Confirm</button>
  </li>
  <!-- Below is only to preserve space -->
  <li class="space-preserver ng-hide">
    <a href="javascript:void(0)"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>
  </li>
</ol>

<div class="form-group" ng-repeat="parentItem in $ctrl.itemsControl.parentItems">
  <label for="selectedParentItemId">Selected {{parentItem.itemType}}</label>
  <input type="text" class="form-control" readonly ng-model="parentItem.name"></input>
</div>

<form name="sideNavForm" novalidate ng-if="$ctrl.item">
<div class="form-group" ng-if="$ctrl.items.length > 0">
  <label for="selectedItemId">Select {{$ctrl.itemsControl.itemType}}</label>
  <div ng-repeat="_item in $ctrl.items">
    <div class="input-group sidenav-item" ng-if="(_item._id !== $ctrl.itemsControl.selectedId)">
      <span class="input-group-addon"><input type="radio" ng-model="$ctrl.itemsControl.selectedId"
        value="{{_item._id}}" ng-change="$ctrl.itemsControl.switchItem($ctrl.itemsControl.selectedId)"/>
      </span>
      <input type="text" class="form-control" readonly ng-model="_item.name"></input>
    </div>

    <div class="input-group sidenav-item" ng-if="(_item._id === $ctrl.itemsControl.selectedId)"
    ng-class="{'has-error': (sideNavForm.newItemName.$invalid || sideNavForm.newItemName.$empty)}">
      <span class="input-group-addon"><input type="radio" ng-model="$ctrl.itemsControl.selectedId"
        value="{{_item._id}}" ng-change="$ctrl.itemsControl.switchItem($ctrl.itemsControl.selectedId)"/>
      </span>
      <input type="text" ng-if="$ctrl.item.readOnly" class="form-control" readonly ng-model="_item.name"></input>

      <input type="text" ng-if="! $ctrl.item.readOnly" class="form-control"
      ng-model="$ctrl.newItemName" name="newItemName" minlength=1 maxlength=20 required
      ng-model-options='{ debounce: 2000 }'
      ng-change="sideNavForm.newItemName.$invalid || $ctrl.itemControls.renameItem($ctrl.newItemName)"></input>
    </div>
  </div>
</div>

<div ng-if="$ctrl.item">
  <div ng-if="$ctrl.itemControls.readOnlyable && $ctrl.settingsToggle">
    <label>Readonly settings for {{$ctrl.itemControls.itemType}}</label>
    <div class="form-group">
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="$ctrl.item.readOnly" ng-disabled="! $ctrl.itemControls.validItem()"
          ng-change="$ctrl.itemControls.updateItem()"> Read only
        </label>
      </div>
    </div>
  </div>

</div>
</form>
