<div class="panel with-nav-tabs panel-default" ng-controller="leafletVizDesignCtrl as leafletVizDesignCtrl">
  <div class="panel-heading">
    <ul class="nav nav-tabs">
      <li ng-class="{active: leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard === 'data'}">
        <a ng-click="leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard = 'data'">Data</a>
      </li>
      <li ng-class="{active: leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard === 'usageInfo'}">
        <a ng-click="leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard = 'usageInfo'">Usage Info</a>
      </li>
    </ul>
  </div>

  <div class="panel-body">
    <div class="row" ng-if="leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard !== 'usageInfo'">
      <div class="col-md-5">
        <div ng-if="leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard === 'data'">
          <div ng-if="vizDesignCtrl.nameExtended">
            <form name="leafletVizDesignCtrl.dataForm">
              <div class="form-group">
                <label for="dataSet">Data Set</label>
                <select class="form-control" ng-model="vizDesignCtrl.visualization.dataSetId" name="dataSet"
                ng-options="dataSet._id as dataSet.name group by dataSet.dataPanelName for dataSet in vizDesignCtrl.dataSets"
                ng-change="vizDesignCtrl.updateAndReload()">
                </select>
              </div>

              <div class="form-group">
                <label for="template">Chart Type</label>
                <select class="form-control" ng-model="vizDesignCtrl.visualization.templateId" name="template"
                ng-options="template._id as template.name group by template.pluginType for template in vizDesignCtrl.templates"
                ng-change="vizDesignCtrl.updateChartTypeAndReload()">
                </select>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="col-md-7">
        <div class="designer-chart-container" dimensions="vizDesignCtrl.dimensions">
          <visualization visualization="vizDesignCtrl.reactiveVisualization" dim="vizDesignCtrl.dimensions" ng-if="vizDesignCtrl.ready"></visualization>
        </div>
      </div>
    </div>

    <div ng-if="leafletVizDesignCtrl.readState.mainContentSelectedTab.dashboard === 'usageInfo'" >
      <div ng-bind-html="leafletVizDesignCtrl.template.usageInfo"></div>
    </div>
  </div>
</div>
